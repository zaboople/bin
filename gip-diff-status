function usage() {
  echo "For getting filenames changed out of a diff"
  echo "Usage: <git diff> | gip-diff-status"
  echo ""
}

egrep '^(\+\+\+|\-\-\-) ' \
 | egrep -v '^--- /dev/null$' \
 | perl -pe 's/^(\+\+\+|\-\-\-) (a|b)\///' \
 | gawk 'BEGIN {p1=""; p2=""; count=0;}{
  if (p1=="")
    p1=$0
  else
  if (p1!=$0) {
    print "NEW "p1
    p1=$0
  }
  else {
    print "CHG "p1
    p1=""
  }
} END {if (p1 != "") print "NEW "p1}'
